<!doctype html>
<html>
  <head>
    <title>Audio Error Test</title>
  </head>
  <body>
    <h1>Audio Error Logging Test</h1>
    <p>Check console for error messages</p>

    <audio
      id="testAudio"
      preload="auto"
      onError="handleAudioError(event)"
      onLoadedData="console.log('Audio loaded successfully')"
    >
      <source src="/audio/nonexistent-file.mp3" type="audio/mpeg" />
    </audio>

    <script>
      // Test the NEW improved error handling
      function handleAudioError(e) {
        const target = e.target;
        const error = target.error;
        console.error("‚úÖ NEW - Audio loading error:", {
          code: error?.code,
          message: error?.message || "Unknown audio error",
          src: target.src,
          networkState: target.networkState,
          readyState: target.readyState,
        });
      }

      // Test the OLD problematic error handling
      function handleAudioErrorOld(e) {
        console.error("‚ùå OLD - Audio loading error:", e);
      }

      // Load the audio to trigger error
      document.getElementById("testAudio").load();

      console.log("üîÑ Audio error test started - check console for results");
    </script>
  </body>
</html>
